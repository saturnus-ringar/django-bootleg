{% load static i18n bootleg bootstrap_tags compress %}
<!doctype html>
<html lang="{{ bootleg_settings.html_language_code }}">
<head>
<meta charset="utf-8">
<title>{% block page_title %}{% get_first_with_value view.page_title page_title %}{% endblock %}</title>
<meta name="description" content="{% block meta_description %}{% get_first_with_value meta_description view.meta_description view.title %}{% endblock %}" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://kit.fontawesome.com/28738b72bb.js" crossorigin="anonymous"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/pikaday/css/pikaday.css">
{% compress css %}
<link rel="stylesheet" type="text/css" href="{% static 'bootleg/css/bootleg.css' %}" />
<link rel="stylesheet" type="text/css" href="{% static 'bootleg/css/vendor/easy-autocomplete.css' %}" />
{% for css_file in bootleg_settings.CSS_FILES %}
    <link rel="stylesheet" type="text/css" href="{% static css_file %}" />
{% endfor %}
{% endcompress %}
{% block extra_head %}
{% endblock %}

{# google analytics :( #}
{% if bootleg_settings.google_analytics_account %}
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ bootleg_settings.google_analytics_account }}"></script>
    <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', '{{ bootleg_settings.google_analytics_account }}');
    </script>
{% endif %}
</head>

<body>
{% include bootleg_settings.NAVIGATION_TEMPLATE %}

<main role="main" id="main" class="{{ bootleg_settings.CONTAINER_CSS_CLASS }}">
{% if messages %}
    {% for message in messages %}
        {% get_alert message.tags message %}
    {% endfor %}
{% endif %}

<h1>
{% block h1 %}
    {% get_first_with_value heading view.heading page_title view.page_title %}
{% endblock %}
</h1>

{% block content %}
    {% if view.page_text %}
        {{ view.page_text }}
    {% endif %}
    {% include "bootleg/includes/form.html" %}
    {% if view.get_extra_text %}
        {{ view.get_extra_text|safe }}
    {% endif %}
    {% if extra_text %}
        {{ extra_text|safe }}
    {% endif %}
{% endblock %}

{% block footer %}
{% endblock %}
</main>

<script>
    var Context = {
        jsErrorURL: "{% url 'bootleg:javascript_error' %}",
        dateFormat: "{{ bootleg_settings.JS_DATE_FORMAT }}",
        dateTimeFormat: "{{ bootleg_settings.JS_DATETIME_FORMAT }}",
    }
</script>

<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/pikaday/pikaday.js"></script>
{% compress js %}
    <script src="{% static 'bootleg/js/vendor/jquery.easy-autocomplete.js' %}"></script>
    <script src="{% static 'bootleg/js/vendor/jquery.highlight-5.patched.js' %}"></script>
    <script type="text/javascript" src="{% static 'bootleg/js/bootleg.js' %}"></script>
{% endcompress %}
{% block extra_js %}
{% endblock %}
</body>
</html>
